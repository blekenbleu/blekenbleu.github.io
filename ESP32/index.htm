<html><head>
<style> body { margin-left: 80px; } ul {margin-top:0; } dl {margin-top:0; } h4 {margin-bottom:0; } </style>
<title>Composite USB, web server and Servo control using Arduino and ESP32-S2-Saola-1</title></head>
<body><font size=+1>
<h3>Arduino and ESP32-S2-Saola-1</h3>
<h4>Ordered from <a href="https://www.jameco.com/z/ESP32-S2-Saola-1M-Espressif-Systems-ESP32-S2-WROOM-Series-Evaluation-Board-4MB-Flash-802-11-b-g-n-WiFi-WLAN-_2324583.html">JameCo</a>:
  ESP32-S2-Saola-1M <a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32s2/hw-reference/esp32s2/user-guide-saola-1-v1.2.html">ESP32-S2-WROOM Dev 4MB Flash</a></h4>
<img  width=640 src="https://docs.espressif.com/projects/esp-idf/en/latest/esp32s2/_images/esp32-s2_saola1-pinout.jpg"><br clear=all>
 &nbsp <a href="https://www.espressif.com/sites/default/files/documentation/esp32-s2-wroom_esp32-s2-wroom-i_datasheet_en.pdf">ESP32-S2-WROOM Data sheet</a>
 &nbsp <a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32s2/hw-reference/esp32s2/user-guide-saola-1-v1.2.html">ESP32-S2-Saola-1 user guide</a>

<h5>Arduino pin assignments:</h5>
<img width=640 src="https://www.mischianti.org/wp-content/uploads/2020/11/ESP32-S2-Saola-1MI-pinout-mischianti.png"><br clear=all><br>

There are now also ESP32-S2 boards from <a href="https://www.amazon.com/dp/B093BH5Z7P">LILYGO</a>,
 <a href="https://www.amazon.com/dp/B098TZ64LK">SparkFun</a>,
 <a href="https://www.amazon.com/dp/B093CJ4V3Y">UnexpectedMaker</a>
<ul compact>
<li>LILYGO provides <a href="https://github.com/Xinyuan-LilyGO/ESP32_S2">absolutely minimal documentation</a>, none useful for Arduino.
<li><a href="https://learn.sparkfun.com/tutorials/esp32-s2-thing-plus-hookup-guide/software-overview">SparkFun's hookup guide</a>
 includes the <a href="https://cdn.sparkfun.com/assets/learn_tutorials/8/5/2/CP210x_Universal_Windows_Driver.zip">Silicon Labs'
 Windows VCP driver for Arduino loading.</a>
<li><a href="https://unexpectedmaker.com/tinys2">UnexpectedMaker</a> describes using
 <a href="https://github.com/espressif/esptool">esptool</a> to flash ESP32-S2.
<li><a href="https://www.aliexpress.com/item/1005001403045642.html">MuseLab nanoESP32-S2</a>,
 <a href="https://www.electromaker.io/shop/product/cucumber-m-esp32-s2-development-board">Cucumber M Esp32-s2</a>, and
 <a href="https://www.digikey.com/en/products/detail/espressif-systems/ESP32-S2-DEVKITC-1R/15222539">Espressif ESP32-S2-DEVKITC-1R</a><br>
 provide second (OTG) USB connectors
</ul> 

<h4><a href="install.htm">ESP32-S2-Saola-1 Arduino installation</a></h4>

<h4><a href="tinyusb.htm">TinyUSB for Arduino ESP32-S2</a></h4>

<h4><a href="webserver.htm">Arduino ESP32-S2 webservers</a></h4>

<h4><a href="midi.htm">Arduino ESP32-S2 MIDI</a></h4>

<h4><a href="https://docs.espressif.com/projects/espressif-esp-iot-solution/en/latest/motor/servo.html">Servo</a> support</h4>
<ul>
<li><a href="https://www.arduino.cc/reference/en/libraries/esp32_s2_isr_servo/">Arduino <b>ESP32_S2_ISR_Servo</b> library</a>
<li><a href="https://randomnerdtutorials.com/esp32-servo-motor-web-server-arduino-ide">Random Nerd Tutorial</a>
<li><a href="https://forum.arduino.cc/t/servo-control-on-esp32-s2/858913">forum issues</a>
<li>Interrupt-driven <a href="https://github.com/khoih-prog/ESP32_PWM">ESP32-PWM</a>
</ul>

GitHub:
<ul compact>
<li><a href="https://github.com/espressif/arduino-esp32/releases/tag/2.0.0">ESP32 Arduino 2.0.0 released Aug 31 2021</a>
<li>Andreas Spiess: <a href="https://github.com/SensorsIot/ESP32-S2">https://github.com/SensorsIot/ESP32-S2</a>
<li><a href="https://github.com/topics/esp32-s2">ESP32-S2 topics</a> list
</ul>

Other:<ul compact>
<li>WUD-Ducky <a href="https://bestofcpp.com/repo/tobozo-WUD-Ducky">CDC + HID + MIDI</a>
<li><a href="https://docs.arduino.cc/software/ide-v2">Arduino 2 IDE (no ESP32)</a>
<li>espressif <a href="https://docs.espressif.com/projects/arduino-esp32/en/latest/">ESP32 Arduino Core's documentation</a>
<li><a href="https://www.arduinolibraries.info/">Arduino Library List</a>
<li>ESP32.com <a href="https://www.esp32.com/viewtopic.php?f=19&t=22209">Arduino support</a><br>
<li>ESP32.com <a href="https://www.esp32.com/viewforum.php?f=23&sid=bebe71cd2d736539a1cad65d96eab1cd">English forum</a>
 &nbsp <a href="https://www.esp32.com/viewtopic.php?f=19&t=20364">with Arduino IDE</a>
<li><a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32s2/api-reference/peripherals/usb_device.html">USB pin wiring</a>
</ul>

<h4><a href="https://maker.pro/esp8266/tutorial/a-comparison-of-the-new-esp32-s2-to-the-esp32">ESP32-S2 compared to ESP32</a> - Jun 14, 2020</h4>
<iframe width="640" height="480" src="https://www.youtube.com/embed/L6IoSVdKwNM?start=80"></iframe><br>

<h4>ESP32-S2 compared to STM32, Raspberry Pi Pico</h4>
<iframe width="640" height="480" src="https://www.youtube.com/embed/cVHCllbN3bQ?start=82"></iframe><br>

<h4>solderless breadboarding</h4>
ESP32-S2-Saola-1 width is inconvenient for 400-point breadboards:<br>
<img width=640 src="uncut.jpg"><br clear=all><br>
.. but merely a temporary obstacle for those with bandsaw access:<br>
<img width=640 src="cut.jpg"><br clear=all><br>

<h4>ESP32-S2 pin allocations</h4>
per <a href="https://github.com/blekenbleu/esp32s2LED/blob/master/src/Servo.h"><code>libraries/esp32s2LED/src/Servo.h</code></a>:<br>
<pre>// Map Arduino pins to available ESP32-S2 PWM pins
#define PC13 2                          // typical LED pin:  GPIO0
#define WS2812_PIN  18                  // GPIO18 for ESP32-S2-Saola-1M (WROOM)
// 8,9 are SDA, SCL; 15-16 are XTAL; 17 is DAC1; 19-20 are USB; 22-25 are nc
// 26 is Flash; 27-32 are nc; 39-42 are JTAG; 43-44 are COM port; 46 is input-only
#define PB9  6
#define PB8  7
#define PB7  10
#define PB6  11
#define PA10 12
#define PA9  13
#define PA8  14
#define PB1  21
#define PB0  33 // <- level converted
#define PA7  34 // <- level converted
#define PA6  35
#define PA3  36
#define PA2  37 // <- level converted
#define PA1  38 // <- level converted
#define PA15 45</pre>
<h4>USB OTG pinout</h4>
<img width=640 src="USB.jpg"><br clear=all>
<ul>
<li>Green to GPIO20
<li>White to GPIO19
<li>Black to <font size = +3 color=blue><b>-</b></font> bus
<li>GND to <font size = +3 color=blue><b>-</b></font> bus
</ul>

<h4>Level converter for 5V PWM fans and Servos</h4>
<img src="level_converter.jpg"><br clear=all>

</font></body></html>
