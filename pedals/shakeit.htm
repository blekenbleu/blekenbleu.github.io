<html>
<head>
<title>SimHub ShakeIt tactile profiles</title>
<style>
body {
  margin: 60px;
}
th {
  text-align: left;
}
table {
  border: 1px solid white;
  border-collapse: collapse;
}
th, td {
  border: 1px solid white;
  border-collapse: collapse;
}
</style>
</head>
<body>
<font size=-1><a href="index.htm#ShakeIt"><i>back</i></a></font>
<h2>SimHub ShakeIt Bass Shaker profiles</h2>
<font size=+1>
<sl>
<li><a href="#intro">Introduction</a>
<li><a href="#form">Formulae</a>
</sl>

<a name=intro>
<h4>Introduction</h4></a>
Bass Shaker effects are output as audio signals, instead of to rumble motors.<br>
As of 18 Sep 2019, my SimHub lists 28 profiles for Any Game, 1 for RaceRoom and 1 for Assetto Corsa.<br>
This does not mean that 28 profiles work well with any game;<br>
merely that 1 depends on a property unique to RR and another uses an AC-unique property.<br>
<dl>
<dt><b>Default profile</b> 17 effects
<dd>ShakeIt plugin as initially received; only RPM was IMO useful as provided<br>
<dt><b>AC1</b> 2 effects
<dd>my first prune of provided Default, leaving only WHEELS SLIPS and RPMS<br>
<dt><b>RPM-modulated up/downshifts</b> 3 effects
<dd><a href="https://www.racedepartment.com/threads/tactile-immersion-general-discussion-hardware-software.137631/page-197#post-3357575">by request</a>
<dt><b>BrakeRunoutRoadNoise</b> 2 output effects
<dd>While ABS is handy, the SimHub effect IMO activates too late for use as braking feedback.<br>
Instead, this effect simulates some rotor runout for light braking, progressing to road noise for moderate pressure.
At high pedal pressures, the foot becomes substantially insensitive to less than IMO distracting tactile stimulation.
<a name=u4ssc><dt><b>(un)Loaded 4-Wheel Slips with Speed Curving</b> 6 effects</a>
<dd>boring RPMS effect, <code>proxy_G</code> from (AC-only?) <code>GameRawData.Physics.WheelLoad</code>,<br>
<code>proxyS</code> from unportable <code>GameRawData.Physics.WheelSlip</code>,<br>
<i>loaded wheel slips</i> tactile effect, <i>unloaded rear wheels slip: oversteer</i> effect,<br>
generic SPEED WITH CURVING effect to export <code>SpeedCurv</code> property for PWM fan custom serial device.
<dt><b>speed shifts</b>
<dd>Tactile effect for shifts should IMO reflect shift smoothness,<br>
which presumably corresponds in speed changes during those shifts.<br>
This effect currently explores three formulae, each gated by gear changes and clutch releases:<ul compact>
<li>high-pass filtering of changes in speed
<li>surge acceleration
<li>surge acceleration and high-pass filtering of same (jerk)</ul>
<img src="shifts.gif"><br clear=all>
<font size=-1>
<i>Front left = Gear; Front right = surge acceleration; Rear left = high pass filter of speed changes;<br>
Rear right = surge acceleration + high pass filter of acceleration changes</i><br></font><br>
Since <code>Rear left</code> is nearly a recalculation of <code>Front right</code>, results differ surprisingly..<br>
As a reminder, to derive acceleration from speed samples, one typically<br>
subtracts the previous speed value from the current value,<br>
then optionally low-pass filters those differences,<br>
instead of subtracting low-pass filtered previous samples from current samples.<br>
However, rough shifts interest is more for sudden changes than long-term accuracy.<br>
Minimizing errors between methods involves tedious juggling of gains and filtering factors.<br>
Here are two plots evaluating methods, gated neither by gear changes nor clutch releases:<ul compact>
<li><code>Front left</code> is <code>SpeedKmh</code>
<li><code>Front right</code> is <code>AccelerationSurge</code>
<li><code>Rear left</code> is current speed minus <a href=#lpiir>low-pass filtered</a> previous speeds
<li><code>Rear right</code> is <a href=#hpiir>high-pass filtered</a> accelerations</ul>
<img src="plot1.gif"><br clear=all>
This next plot is when braking with front tire lockup, a limit condition:<br>
<img src="plot2.gif"><br clear=all>
The low pass time constant determined to roughly minimize<br>
differences between <code>Front right</code> and <code>Rear left</code> was then also applied to <code>Rear right</code>.<br>
<dt><b>Wind Sim and (un)Loaded Wheel Slips</b> 6 effects
<dd>perhaps a duplicate of <a href=#u4ssc>(un)Loaded 4-Wheel Slips with Speed Curving</a>
<dt><b>(un)Loaded 4-Wheel Slips</b> 5 effects
<dd>perhaps a subset of <a href=#u4ssc>(un)Loaded 4-Wheel Slips with Speed Curving</a>
<a name=rrrel><dt><b>RRRELoaded4-chanWheelslipUndersteer</b> 6 effects</a>
<dd>from <a href="https://www.racedepartment.com/threads/simhub-shakeit-bass-shakers-custom-4-corner-tire-slip.198455/page-4#post-3427571">RangeyRover</a>
<dt><b>NewLoaded4-chanWheelslipUndersteer</b> 7 effects
<dd>from <a href=#rrrel>RRRELoaded4-chanWheelslipUndersteer</a>
<dt><b>Loaded4-chanWheelslipUndersteer</b> 8 effects
<dd>(RPMS), <i><b>unused</b></i> <code>proxy_G</code> from <code>OrientationYaw</code> and <code>SpeedKmh</code>,<br>
<code>AbsAcc</code> from <code>AccelerationSway</code> and <code>AccelerationSurge</code>,<br>
<code>proxyL</code> from <code>AccelerationSway</code>, <code>AccelerationSurge</code> and <code>AbsAcc</code>,<br>
<code>proxyS</code> from WHEELS SLIP, <code>LoadedSlip</code> from <code>proxyL</code> and <code>proxyS</code>,<br>
<code>UnderOversteer</code> from <code>proxyS</code> and <code>AbsAcc</code>,<br>
<i>mix slips and oversteer</i> from <code>UnderOversteer</code>, <code>proxyS</code> and <code>LoadedSlip</code><br>
<a name=nl4cwsu><dt><b>NewLoaded4-chanWheelslipUndersteer</b> 6 effects</a>
<dd><code>AbsAcc</code> from <code>AccelerationSway</code> and <code>AccelerationSurge</code>,<br>
<code>proxyL</code> from <code>AccelerationSway</code>, <code>AccelerationSurge</code> and <code>AbsAcc</code>,<br>
<code>proxyS</code> from WHEELS SLIP, <code>LoadedSlip</code> from <code>proxyL</code> and <code>proxyS</code>,<br>
<code>UnderOversteer</code> from <code>proxyS</code> and <code>AbsAcc</code>,<br>
<i>mix slips and oversteer</i> from <code>UnderOversteer</code>, <code>proxyS</code> and <code>LoadedSlip</code>
<dt><b>NewLoaded4-chanWheelslipUndersteer</b> 6 effects
<dd>duplicate of <a href="nl4cwsu">NewLoaded4-chanWheelslipUndersteer</a>, except <code>UnderOversteer</code> is also a tactile output
<dt><b>Aug14Loaded4-chanWheelslipUndersteer</b> 6 effects
<dd><i>mix slips and oversteer</i> disabled, output <code>LoadedSlip</code>
<dt><b>Aug14Loaded4-chanWheelslipUndersteer</b> 6 effects
<dd><i>mix slips and oversteer</i> disabled, output <code>LoadedSlip</code>
<dt><b>Aug19Loaded4-chanWheelslipUndersteer</b> 6 effects
<dd>group non-output effects
<dt><b>joystick telemetry</b> 2 effects
<dd>output based on SideWinder slider when button 7 is pressed<br>
ROAD IMPACTS (curiosity?)
<dt><b>front/rear Wheel Slip experiments</b> 5 effects
<dd><code>proxy_G</code> from <code>GameRawData.Physics.WheelLoad</code>,<br>
<code>slip</code> from WHEELS SLIP,<br>
<i>average vs correlated front slip</i> tactile output from <code>slip</code><br>
<code>proxyS</code> from <code>GameRawData.Physics.WheelSlip</code>,<br>
<i>loaded wheel slips</i> output from <code>proxy_G</code> and <code>proxyS</code>
<dt><b>Schnirbus tweaked slip</b>
<dd><i>Experimental 4-corner Wheelslip for iRacing</i> group (4 effects, 1 output),<ul compact>
<li><code>wslip</code> from WHEELS SLIP
<li><code>sideways</code> from SPEED WITH CURVING <i>only generate in turns</i>
<li><code>long shift</code> from <code>GameRawData.Telemetry.LongAccel</code>
<li><i>4-Corner Slip output from <code>sideways</code> and <code>long shift</code>
</ul>
WHEELS SLIP output
<dt><b>Schnirbus experimental slip</b> 2 effects
<dd><i>Experimental 4-corner Wheelslip for iRacing</i> group (4 effects, 1 output),<br>
CUSTOM corners output from <code>wslip.ALL</code>
<dt><b>Schnirbus experimental slip</b> 1 effect
<dd><i>Experimental 4-corner Wheelslip for iRacing</i> group (4 effects, 1 output),<br>
<dt><b>Schnirbus experimental slip</b> 1 effect
<dd><i>Experimental 4-corner Wheelslip for iRacing</i> group (4 effects, 1 output),<br>
<dt><b>portable Loaded 4-Wheel Slips</b> 1 effect
<dd><i>blekenbleu Effects group</i> (7 effects, 2 outputs, 3 disabled),<br>
<dt><b>Loaded4-chanWheelSlipsUndersteer</b> 9 effects
<dt><b>Loaded4-chanWheelSlipsUndersteer</b> 8 effects
<dt><b>Loaded4-chanWheelSlipsUndersteer</b> 8 effects
<dt><b>Empty</b> 0 effects
<dt><b>New</b> 1 effect
<dd>vanilla RPMS to test for SimHub ACC bug
</dl>

<a name=form><h4>Formulae</h4></a>
<dl>
<a name=lpiir><dt><b>low-pass IIR</b></a>
<dd>Discrete IIR is basically a modified rolling average,<br>
where part of that value is each time replaced by<br>
some fraction of the difference between a new sample and previous value.
<a name=hpiir><dt><b>high-pass IIR</b></a>
<dd>Generate low-pass IIR values, but return differences between<br>new samples and previous low-pass values.
</dl>
</font>
</body>
</html>
