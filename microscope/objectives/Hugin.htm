<html>
<head>
<style>
body {
   width:960px;
   margin-left:60px;
}
</style>
<title>Hugin for image alignment</title>
</head>
<body>
<font size=-1><i><a href="./index.htm">back</a></i></font>
<a href="https://www.gixen.com/index.php" name="9e092736783d0da1dfd8413d57d10faf" target="_blank" >
<img align=right src="https://www.gixen.com/images/gixenlink.gif" border="0" alt="Auction Sniper" title="Auction Sniper"></a><br clear=all>

<h1 align=center>Hugin for image alignment</h1>
<p style="page-break-after: always;">
Image comparisons among <a href="../Nikon/Trinoc/">trinocular camera configurations</a> will use <a href="../../ImageProcessing/dimg.html"><code>dimg</code></a>,<br>
a relatively simple ImageMagick script.&nbsp; The harder part will be<br>
aligning captured images for meaningful target pixel difference comparisons.<br>
<a href="">Hugin</a> includes an <code>align_image_stack</code> utility which anecdotally bests <a href="https://github.com/maitek/image_stacking">OpenCV</a>,<br>
but is not robust against significant rotation and/or magnification differences.<br>
Hugin may be used as an alternative or in combination with <code>align_image_stack</code>,<br>
where a shared <code>.pto</code> file improves e.g. control points and lens calibrations.<br>
Command line options for <code>align_image_stack</code> are <a href="https://wiki.panotools.org/Align_image_stack">here</a>.<br>
Image alignment techniques (not necessarily Hugin's) are described <a href="http://graphics.cs.cmu.edu/courses/15-463/2011_fall/Lectures/feature-alignment.pdf">there</a>.<br>
<br>
<font size=+1><b>other Hugin image alignment URLs</b></font><br>
<a href="https://pixls.us/articles/aligning-images-with-hugin/">Aligning Images with Hugin</a><br>
<a href="https://hugin.sourceforge.io/docs/manual/Align_a_stack_of_photos.html">Align a stack of photos with Hugin</a><br>
<a href="http://www.lemis.com/grog/photography/aligning-with-Hugin.php">Greg's aligning images with Hugin</a><br>
<a href="https://photo.stackexchange.com/questions/83178/cannot-align-images-with-align-image-stack">Cannot align images with align_image_stack</a><br>
<h4>IrfanView custom crop for <code>align_image_stack</code></h4>
All images passed to <code>align_image_stack</code> <i>must have identical pixel dimensions</i>, despite potentially different magnifications.<br>
Dragging the crop window to exact pixels in at least tedious,<br>
 but IrfanView has a Custom settings pop-up for that by [Shift]+[C]:<br>
<img src="CustomCrop.jpg"><br clear=all>

</p><p style="page-break-after: always;"> 
<h3><a href="https://hugin.sourceforge.io/docs/manual/Calibrate_lens_gui.html">Hugin Lens calibration GUI</a></h3>
Other Hugin/Panotools programs want lens calibration information,
which will be unavailable for microscope optics.<br>
This GUI wants an image with straight lines, <a href="http://hyperphysics.phy-astr.gsu.edu/hbase/geoopt/micros.html">Focal length (fl)</a><br>
and Focal length multiplier (which is 1.6 for Canon APS-C cameras)<br>
For 210 tube length, 40x objective fl ~ 52.5mm and 5x fl ~ 420mm.<br>
<img src="HuginLensCal.png"><br clear=all>
<ul compact>
<li><b>Add</b> an image
<li><b>Find lines</b>
<li><i>check</i> Radial Distortion <b>(a): (b): (c):</b>
<li><b>Optimize</b>
<li><b>Save lens</b>
</ul>
In my experience, <b>Image Center Shift</b> does bad things (select <b>Preview Corrected</b>),<br>
and the GUI wants killing and restarting after things go bad.
</p>
</body></html>
